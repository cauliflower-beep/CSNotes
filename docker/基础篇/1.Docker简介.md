## 1.Docker是什么

> 为什么会有docker出现？

一句话，Docker解决了运行环境和配置问题，它是一种方便做持续集成并有助于整体发布的容器虚拟化技术。

## 2.Docker理念

Docker是基于Go语言实现的云开源项目。

Docker的主要目标是“Build，Ship and Run Any App,Anywhere”，也就是通过对应用组件的封装、分发、部署、运行等生命周期的管理，使用户的APP（可以是一个WEB应用或数据库应用等等）及其运行环境能够做到“一次镜像，处处运行”。

Docker是基于linux容器技术发展而来的。

## 3.与传统虚拟机的比较

### 3.1传统虚拟机

传统虚拟机可以在一种操作系统里面运行另一种操作系统，比如在Windows10系统里面运行Linux系统CentOS7。应用程序对此毫无感知，因为虚拟机看上去跟真实系统一模一样，而对于底层系统来说，虚拟机就是一个普通文件，不需要了就删掉，对其他部分毫无影响。

这类虚拟机完美的运行了另一套系统，能够使应用程序，操作系统和硬件三者之间的逻辑不变。

传统虚拟机技术基于安装在主操作系统上的虚拟机管理系统（如VirtualBox和VMWare等）创建虚拟机，进而在虚拟机上安装操作系统，再在操作系统中安装部署各种应用。

![传统虚拟机结构](..\imgs\传统虚拟机结构.png)

传统虚拟机有很多缺点：资源占用多、冗余步骤多、启动慢。

### 3.2容器虚拟化技术

这里专指linux实现的容器虚拟化技术。

**Linux容器**(Linux Containers，缩写为 LXC)是与系统其他部分隔离开的**一系列进程**，从另一个镜像运行，并由该镜像提供支持进程所需的全部文件。容器提供的镜像包含了应用的所有依赖项，因而在从开发到测试再到生产的整个过程中，它都具有可移植性和一致性。

Linux 容器**不是模拟一个完整的操作系统**，而是对进程进行隔离。有了容器，就可以将软件运行所需的所有资源打包到一个隔离的容器中。容器与虚拟机不同，不需要捆绑一整套操作系统，只需要软件工作所需的库资源和设置。系统因此而变得高效轻量并保证部署在任何环境中的软件都能始终如一地运行。

![img](..\imgs\容器示意图.png)

docker容器是在**操作系统层面**上实现虚拟化，直接复用本地主机的操作系统，而传统的虚拟机则是在**硬件层面**实现虚拟化。与传统虚拟机相比，docker优势体现为启动速度快、占用体积小。

## 4.带来的变化

### 4.1部署

传统的应用开发完成后，需要提供一堆安装程序和配置说明文档，安装部署后需根据配置文档进行繁杂的配置才能正常运行。

Docker化之后只需要交付少量容器镜像文件，在正式生产环境加载镜像并运行即可，应用安装配置在镜像里已经内置好，大大节省部署配置和测试验证时间。

### 4.2升级和扩缩容

结合微服务架构，应用的开发构建将变成搭乐高积木一样，每个Docker容器将变成一块“积木”，应用的升级将变得非常容易。

此外，当现有的容器不足以支撑业务处理时，可通过镜像运行新的容器进行快速扩容，使应用系统的扩容从原先的天级变成分钟级甚至秒级。

### 4.3运维

应用容器化运行后，生产环境运行的应用可与开发、测试环境的应用高度一致，容器会将应用程序相关的环境和状态完全封装起来，不会因为底层基础架构和操作系统的不一致性给应用带来影响，产生新的BUG。当出现程序异常时，也可以通过测试环境的相同容器进行快速定位和修复。

### 4.4高效的资源利用

Docker是内核级虚拟化，其不像传统的虚拟化技术一样需要额外的Hypervisor支持，所以在一台物理机上可以运行很多个容器实例，可大大提升物理服务器的CPU和内存的利用率。

![image-20240724184611030](..\imgs\docker工作模式.png)

docker借鉴了标准集装箱的概念。标准集装箱将货物运往世界各地，docker将这个模型运用到自己的设计中，唯一不同的是：集装箱运输货物，而docker运输软件。

