---
title: 内存管理方法对比及相关计算
---

## 1、内存管理方式之间的对比

### 1.1、离散分配方式的对比

![](https://picbed.kimyang.cn/202108260331133.png)

### 1.2、内存管理方式之间的对比

![](https://picbed.kimyang.cn/202108260332771.png)

## 2、内存管理计算中地址的处理（逻辑地址转物理地址）

十六进制、八进制与二进制的后缀分别为：H、O、B。

在**请求分页系统**中，逻辑地址转化为物理地址，处理过程如下：

+ 将其他进制转化为二进制，方便处理
+ 求出页号，页号为逻辑地址与页面大小的商，二进制下为地址高位。
+ 求出页内位移，页内位移为逻辑地址和页面大小的余数，二进制下为地址低位。
+ 根据题意产生也变通过查找页表得到对应页的内存块号或页框号
+ 若给出的是**内存块号**，则用**内存块号乘以块大小，加上基址，再加上页内位移得到物理地址。**
+ 若给出的是**页框号**，则用**页框号与页内位移进行拼接**（页框号依然是高位，页内位移是低位），得到物理地址。
+ 将二进制表示的物理地址根据题目要求转为十六进制或者十进制。

## 3、基本分页管理方式中有效访问时间的计算

有效访问时间（EAT）是指给定逻辑地址找到内存中对应物理地址单元中的数据所用的总时间。

1. 没有快表：

   假设访问存一次所用时间为 $t$，有效访问时间分为：

   + 查找页表项，需要访存一次。
   + 通过对应页表项中的物理地址访问对应的内存单元，需要访存一次。

   因此 $EAT=2t$

2. 存在快表：

   假设访问快表的时间为 $a$，访存一次的时间为 $t$，快表命中率为 $b$，则有效访问时间分为：

   + 查找页表项的平均时间：$a\times b+(t+a)(1-b)$,
     + $a$ 代表快表命中时查找表项的时间，其发生的概率为 $b$
     + $(t+a)$ 代表快表未命中时查找表项的时间，其发生的概率为 $(1-b)$
   + 通过页表项中的物理地址访问对应的内存单元，需要访存一次。

    因此，$EAT=a\times b+(t+a)(1-b)+t$
   由于访问快表的时间很快，有时**题目会说明快表访问时间忽略不计或者不给出访问快表所需时间**，这时认为 a=0。

## 4、请求分页管理方式中有效访问时间的计算

与基本分页管理方式相比，请求分页管理方式多了**缺页中断**的情况。

根据访问页面所在位置，有如下 3 种情况：

+ 访问的页在主存，且访问页在快表中，则：
  + $EAT=查找快表时间+根据物理地址访存时间=a+t$
+ 访问的页在主存，但不再快表中，则：
  + $EAT=查找快表时间+查找页表时间+修改快表时间（题目未给可忽略，通常与查找快表一致）+根据物理地址访存时间=a+t+a+t=2(a+t)$
+ 访问的页不再主存中（也不可能在快表），发生缺页中断，假设缺页中断处理时间为 T（包括了将该页调入主存、更新页表和快表的时间），则
  + $EAT=查找快表时间+查找页表时间+处理缺页时间+查找快表时间+根据物理地址访存时间=a+t+T+a+t=T+2(a+t)$

加入缺页率($f$)和命中快表率($d$)，将以上三种情况组合，则：

$EAT=查找快表时间+d\times 根据物理地址访存时间+(1-d)\times [查找页表时间+f\times(处理缺页时间+查找快表时间+根据物理地址访存时间)+(1-f)\times(修改快表时间+根据物理地址访存时间)]=a+d\times t+(1-d)\times[t+f(T+a+t)+(1-f)\times(a+t)]$

注意：

+ 若题目没说有快表或者说忽略访问和修改快表时间，可以得出上述公式中的 $a=0$;

+ 若题目没说被置换的页面是否被修改，则缺页中断处理时间统一为 $T$

+ 若题目详细说了被置换的页面分为修改和未修改两种不同情况，假设修改的概率为 $n$，修改的处理时间为 $T_1$;未修改的处理时间为$T_2$,则处理缺页时间为$T=n\times T_1+(1-n)\times T_2$

  
